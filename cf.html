<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="target-densitydpi=320,width=640,user-scalable=no">
    <link rel="stylesheet" href="css/mdui.css">
    <script src='js/mdui.js'></script>
    <style>
    .card{
        width: 100%;
        height: 20%;
        background-color: #e5f0f8;
        box-shadow: 1px 1px 5px #888888;
    }
    </style>
    <script>
        function getQueryVariable(variable)
{
       var query = window.location.search.substring(1);
       var vars = query.split("&");
       for (var i=0;i<vars.length;i++) {
               var pair = vars[i].split("=");
               if(pair[0] == variable){return pair[1];}
       }
       return(false);
}
var pm2019 = new Array();
var pm2018 = new Object();
var pm2019 = new Object();
var g2019 = new Object();
var gx2018 = new Array();
var gx2017 = new Array();
var pm2017 = new Object();
var zy2019=new Object();
var qjtext="";
function jiexi(){
    var m = document.getElementById('m');
    //console.log(pm2019);
    m.innerHTML="&nbsp;&nbsp;你的分数为 "+fs+" 对应的排名为:"+pm2019[fs];
    var pm=pm2019[fs];
    for(var i in gx2018){
        var li2018=gx2018[i]['2018li'];
        var li2017=gx2018[i]['2017li'];
        var qw=1-((parseInt(pm)*2-parseInt(pm2018[li2018])-parseInt(pm2017[li2017]))/(parseInt(pm)*2));;
        qw=Math.ceil(qw*10000)/100;
        var qws='';
        if(fs>600){
            if(parseInt(qw)>70&&parseInt(qw)<100){
            qws='<span style="color:red">冲一冲</span>';
        }
        if(parseInt(qw)>=100&&parseInt(qw)<200){
            qws='<span style="color:green">稳一稳</span>';
        }
        if(parseInt(qw)>=200&&parseInt(qw)<450){
            qws='<span style="color:purple">保一保</span>';
        }
        }else{
        if(parseInt(qw)>80&&parseInt(qw)<100){
            qws='<span style="color:red">冲一冲</span>';
        }
        if(parseInt(qw)>=100&&parseInt(qw)<120){
            qws='<span style="color:green">稳一稳</span>';
        }
        if(parseInt(qw)>=120&&parseInt(qw)<140){
            qws='<span style="color:purple">保一保</span>';
        }
        }
        gx2018[i]['qws']=qws;
        if(li2018!='0'&&li2017!='0'&&li2017!=undefined){
            qjtext=qjtext+"\n"+gx2018[i]['yxdm']+"#"+gx2018[i]['xxmc']+"#"+g2019[gx2018[i]['yxdm']]+"#"+pm2019[g2019[gx2018[i]['yxdm']]]+"#"+"#"+li2018+"#"+pm2018[li2018]+"#"+li2017+"#"+pm2017[li2017];
        gx2018[i]['qw']=qw;
        newD(gx2018[i]['yxdm']+"&nbsp;"+gx2018[i]['xxmc'],li2018+' 对应当年排名'+pm2018[li2018],li2017+' 对应当年排名'+pm2017[li2017],qw+"&nbsp;"+qws);
    

    }
    }
    document.getElementById('mq').style.visibility='visible';
    console.log(qjtext);
    //console.log(gx2018[1]['yxdm']);
}
var qqq=false;
function cyc(){
    clear();
    var m = document.getElementById('m');
    var pm=pm2019[fs];
    for(var i in gx2018){
        var li2018=gx2018[i]['2018li'];
        var li2017=gx2018[i]['2017li'];
        if(gx2018[i]['qws'].indexOf('冲一冲')>0){
        newD(gx2018[i]['yxdm']+"&nbsp;"+gx2018[i]['xxmc'],li2018+' 对应当年排名'+pm2018[li2018],li2017+' 对应当年排名'+pm2017[li2017],gx2018[i]['qw']+"&nbsp;"+gx2018[i]['qws']);
    }
    }
}
function wyw(){
    clear();
    var m = document.getElementById('m');
    var pm=pm2019[fs];
    for(var i in gx2018){
        var li2018=gx2018[i]['2018li'];
        var li2017=gx2018[i]['2017li'];
        if(gx2018[i]['qws'].indexOf('稳一稳')>0){
        newD(gx2018[i]['yxdm']+"&nbsp;"+gx2018[i]['xxmc'],li2018+' 对应当年排名'+pm2018[li2018],li2017+' 对应当年排名'+pm2017[li2017],gx2018[i]['qw']+"&nbsp;"+gx2018[i]['qws']);
    }
    }
}
function byb(){
    clear();
    var m = document.getElementById('m');
    var pm=pm2019[fs];
    for(var i in gx2018){
        var li2018=gx2018[i]['2018li'];
        var li2017=gx2018[i]['2017li'];
        if(gx2018[i]['qws'].indexOf('保一保')>0){
        newD(gx2018[i]['yxdm']+"&nbsp;"+gx2018[i]['xxmc'],li2018+' 对应当年排名'+pm2018[li2018],li2017+' 对应当年排名'+pm2017[li2017],gx2018[i]['qw']+"&nbsp;"+gx2018[i]['qws']);
    }
    }
}
function xsqb(){
    clear();
    var m = document.getElementById('m');
    var pm=pm2019[fs];
    for(var i in gx2018){
        var li2018=gx2018[i]['2018li'];
        var li2017=gx2018[i]['2017li'];
        newD(gx2018[i]['yxdm']+"&nbsp;"+gx2018[i]['xxmc'],li2018+' 对应当年排名'+pm2018[li2018],li2017+' 对应当年排名'+pm2017[li2017],gx2018[i]['qw']+"&nbsp;"+gx2018[i]['qws']);
    
    }
}
function sx(){
    var ssnr = document.getElementById('srk').value;
    if(ssnr!=""){
        clear();
        for(var i in gx2018){
            var zy=zy2019[gx2018[i]['yxdm']];
            if(zy.indexOf(ssnr)>0){
                var li2018=gx2018[i]['2018li'];
                var li2017=gx2018[i]['2017li'];
                newD2(gx2018[i]['yxdm']+"&nbsp;"+gx2018[i]['xxmc'],li2018+' 对应当年排名'+pm2018[li2018],li2017+' 对应当年排名'+pm2017[li2017],gx2018[i]['qw']+"&nbsp;"+gx2018[i]['qws'],ssnr,zy);
            }
        }
    }
}
function clear(){
    var q= document.getElementById('q');
    q.innerHTML='';
}
function newD(h,l2018,l2017,qw){
    var s='<div id="card#yxdm" class="mdui-card mdui-ripple"><br/>&nbsp;&nbsp;<div class="mdui-card-primary-title">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;院校代码 #p</div><div class="mdui-card-content">&nbsp;&nbsp;2018年专项计划 最低录取分数 #2018 <br/> &nbsp;&nbsp;2017年专项计划 最低录取分数 #2017<br/>&nbsp;&nbsp;&nbsp;期望值 ：#qw #dy</div></div>';
    s=s.replace('#p',h);
    s=s.replace('#2018',l2018);
    s=s.replace('#2017',l2017);
    s=s.replace('#qw',qw)
    s=s.replace('211高校','<span style="color:#06477c">&nbsp;211高校</span>');
    s=s.replace('985计划','<span style="color:red">&nbsp;985计划</span>');
    s=s.replace('双一流','');
    s=s.replace(']&',']&nbsp;⊙');
    var yxdm=h.split("&nbsp;");
    s=s.replace("#dy",'&nbsp; <div class="mdui-card-actions"><button  style="color:#1F4DF9;" class="mdui-btn mdui-ripple" id="po#yxdm" onclick="MoEX('+yxdm[0]+')"> 查看该学校符合专项计划的专业</button> </div>');
    s=s.replace('#yxdm',yxdm[0]);
    s=s.replace('#yxdm',yxdm[0]);
    var q= document.getElementById('q');
    q.innerHTML=q.innerHTML+'<br/><br/>'+s;
}
function newD2(h,l2018,l2017,qw,ssnr,zynr){
    var s='<div  class="mdui-card mdui-ripple"><br/><div class="mdui-card-primary-title">&nbsp;&nbsp;院校代码 #p</div><div class="mdui-card-content">&nbsp;&nbsp;2018年专项计划 最低录取分数 #2018 <br/> &nbsp;&nbsp;2017年专项计划 最低录取分数 #2017<br/>&nbsp;&nbsp;&nbsp;期望值 ：#qw<br/>#zy<br/>&nbsp;</div></div>';
    s=s.replace('#p',h);
    s=s.replace('#2018',l2018);
    s=s.replace('#2017',l2017);
    s=s.replace('#qw',qw)
    s=s.replace('211高校','<span style="color:#06477c">&nbsp;211高校</span>');
    s=s.replace('985计划','<span style="color:red">&nbsp;985计划</span>');
    s=s.replace('双一流','');
    s=s.replace(']&',']&nbsp;⊙');
    zynr=zynr.replace(ssnr,'<span style="color:red">'+ssnr+"</span>");
    console.log(zynr);
    s=s.replace('#zy',zynr);

    var q= document.getElementById('q');
    q.innerHTML=q.innerHTML+'<br/><br/>'+s;
}
function MoEX(yxdm){
    var v=document.getElementById("po"+yxdm.toString());
    v.style.display='none';
    var c=document.getElementById("card"+yxdm.toString());
    c.innerHTML=c.innerHTML+zy2019[yxdm.toString()];
}

var loads=4;
var loadfinish=0;
function load(f){
    var xmlhttp = new XMLHttpRequest();
    xmlhttp.open('GET',f);
    xmlhttp.f=f;
    xmlhttp.onreadystatechange=function(){
        if(xmlhttp.readyState==4){
            if(xmlhttp.status==200){
                loadfinish++;
                    var x=xmlhttp.response.split('|');
                    if(this.f=='gx.txt'){
                        gx2018=new Array();
                        for(var i in x){
                            var p = x[i].split('#');
                            var z=new Object();
                            z['yxdm']=p[1];
                            z['xxmc']=p[2];
                            z['2018li']=p[4];
                            z['2017li']=p[3];
                            z['2019li']=g2019[z['yxdm']];
                            //console.log(z);
                            gx2018.push(z);
                        }
                        //console.log(gx2018);
                    }
                    if(this.f=="2017li.txt"){
                        for(var i in x){
                            var p=x[i].split('#');
                            pm2017[p[0]]=p[1];
                        }
                    }
                    if(this.f=="2019.txt"){
                        for(var i in x){
                            var p = x[i].split('#');
                            g2019[p[0]]=p[3];
                        }
                    }

                    if(this.f=="2018li.txt"){
                        for(var i in x){
                            var p=x[i].split('#');
                            pm2018[p[0]]=p[1];
                        }
                    }
                    if(this.f=="2019li.txt"){
                        for(var i in x){
                            var p=x[i].split('#');
                            pm2019[p[0]]=p[1];
                        }
                    }
                    if(this.f=="zy3.txt"){
                        
                        for(var i in x){
                            var p=x[i].split('$');
                            //consoleconsole.log(p);
                            zy2019[p[0]]=p[1];
                        }
                        //console.log(zy2019);
                    }
                    if(loadfinish==6){
                        jiexi();
                    }
            }
        }
    }
    xmlhttp.send();
}
    </script>
    <script>
        var fs = getQueryVariable('fs');
        
        var GX2017 = new Object();
        load('2019.txt');
        load('gx.txt');
        load('2019li.txt');
        load('2017li.txt');
        load('2018li.txt');
        load('zy3.txt');
    </script>
</head>
<body style="background:#ffdede;">
        <div class="mdui-toolbar" style="background-color: #ffdede">
                <a href="javascript:;" class="mdui-btn mdui-btn-icon"><i class="mdui-icon material-icons">menu</i></a>
                <span class="mdui-typo-title">高考分数分析-广西专项计划</span>
                <div class="mdui-toolbar-spacer"></div>
              </div>
    <center>
            按照期望值从高到底排序 <br/>
            <span style="color:#F08080">
            期望值: 从往年的专项计划录取分数线对应当年的排名与 你今年高考的排名相比较
            以两者排名相等为基准(100%),根据实际的落差进行相应调整</span>
            <br/>
            <p style="color:red">注意 ： “期望值” 只代表某种统计学数据，并不是填报被录取的概率！<br/>
            期望值越高，被该学校录取的概率越大
            <br/>仅供参考！仅供参考！仅供参考！
            </p>
            <p style="color:#2196f3" id='m'></p>
            <br/>
            <div id='mq'  style="color: white;visibility: hidden">
            <button onclick="cyc()" class="mdui-btn" style="background-color: red">冲一冲</button>
            <button onclick="wyw()" class="mdui-btn" style="background-color: green">稳一稳</button>
            <button onclick="byb()" class="mdui-btn" style="background-color: purple">保一保</button>
            <button onclick="xsqb()" class="mdui-btn" style="background-color: gray">显示全部</button>
            <center><div class="mdui-textfield">
                <input id='srk' style="width:70%" class="mdui-textfield-input" type="text" placeholder="搜索专业 输入专业名称 比如 计算机"/>
              </div><button onclick="sx()" class="mdui-btn" style="background-color: #ee5973">筛选</button></center>
            </div>
        </center>
    
    <div class="mdui-container" id='q'>
        <br/>

     </div> 
    
</body>    
<script>
     mdui.mutation();
</script>